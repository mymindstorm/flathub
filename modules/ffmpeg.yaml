# from https://github.com/flathub/net.granjow.slowmovideo/blob/master/ffmpeg.yaml
name: ffmpeg
cleanup:
  - /include
  - /lib/pkgconfig
  - /share/ffmpeg/examples
config-opts:
  - --enable-shared
  - --disable-static
  - --disable-doc
  - --disable-manpages
  - --disable-debug
  # - --disable-stripping
  - --disable-programs

  - --disable-securetransport
  - --enable-runtime-cpudetect

  - --enable-gpl
  - --enable-version3
  - --enable-optimizations
  - --enable-postproc
  - --enable-pthreads
  - --enable-gnutls
  - --enable-libxcb-xfixes
  - --enable-opengl
  #- --enable-sdl2
  - --enable-vaapi
  - --enable-vdpau
  #- --enable-zlib
  #- --enable-bzlib
  #- --enable-lzma

  - --enable-fontconfig
  - --enable-libfontconfig
  - --enable-libfreetype

  # copied from  manifest
  - --enable-avcodec
  - --enable-avfilter
  - --enable-filters
  - --enable-avdevice
  - --enable-avresample
  #- --enable-libxml2
  - --enable-swscale

  - --enable-libxcb

  - --enable-protocol=file

sources:
  - type: git
    url: https://git.ffmpeg.org/ffmpeg.git
    branch: release/4.4
